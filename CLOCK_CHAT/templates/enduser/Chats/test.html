<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat App</title>
    <link rel="stylesheet" href="enduser/Chats/style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <div class="chat-container">
        <div class="chat-list">
            <div class="chat-search">
                <input type="text" id="searchInput" placeholder="Search chats...">
                <span class="material-icons search-icon">search</span>
            </div>

            <div class="chat-item" data-name="Thor" data-message="Hey! How are you?" data-avatar="icon1.png">
                <img src="icon1.png" alt="User" class="avatar">
                <div class="chat-info">
                    <div class="chat-name">Thor</div>
                    <div class="chat-message">Hey! How are you?</div>
                </div>
                <span class="unread-badge">1</span>
            </div>

            <div class="chat-item" data-name="Iron Man" data-message="Let's catch up later!" data-avatar="icon2.png">
                <img src="icon2.png" alt="User" class="avatar">
                <div class="chat-info">
                    <div class="chat-name">Iron Man</div>
                    <div class="chat-message">Let's catch up later!</div>
                </div>
                <span class="unread-badge">1</span>
            </div>

            <div class="chat-item" data-name="Captain Jack Sparrow" data-message="How was your day?" data-avatar="icon3.png">
                <img src="icon3.png" alt="User" class="avatar">
                <div class="chat-info">
                    <div class="chat-name">Captain Jack Sparrow</div>
                    <div class="chat-message">How was your day?</div>
                </div>
            </div>

            <div class="chat-item" data-name="Spider Man" data-message="Are we still meeting later?" data-avatar="icon4.png">
                <img src="icon4.png" alt="User" class="avatar">
                <div class="chat-info">
                    <div class="chat-name">Spider Man</div>
                    <div class="chat-message">Are we still meeting later?</div>
                </div>
            </div>
            
            <div class="chat-item" data-name="Batman" data-message="I need those files!" data-avatar="icon5.png">
                <img src="icon5.png" alt="User" class="avatar">
                <div class="chat-info">
                    <div class="chat-name">Batman</div>
                    <div class="chat-message">I need those files!</div>
                </div>
                <span class="unread-badge">1</span>
            </div>
            
            <div class="chat-item" data-name="Batman" data-message="I need those files!" data-avatar="icon5.png">
                <img src="icon5.png" alt="User" class="avatar">
                <div class="chat-info">
                    <div class="chat-name">Batman</div>
                    <div class="chat-message">I need those files!</div>
                </div>
                <span class="unread-badge">1</span>
            </div>
            <div class="chat-item" data-name="Batman" data-message="I need those files!" data-avatar="icon5.png">
                <img src="icon5.png" alt="User" class="avatar">
                <div class="chat-info">
                    <div class="chat-name">Batman</div>
                    <div class="chat-message">I need those files!</div>
                </div>
                <span class="unread-badge">1</span>
            </div>
            <div class="chat-item" data-name="Batman" data-message="I need those files!" data-avatar="icon5.png">
                <img src="icon5.png" alt="User" class="avatar">
                <div class="chat-info">
                    <div class="chat-name">Batman</div>
                    <div class="chat-message">I need those files!</div>
                </div>
                <span class="unread-badge">1</span>
            </div>
            <div class="chat-item" data-name="Batman" data-message="I need those files!" data-avatar="icon5.png">
                <img src="icon5.png" alt="User" class="avatar">
                <div class="chat-info">
                    <div class="chat-name">Batman</div>
                    <div class="chat-message">I need those files!</div>
                </div>
                <span class="unread-badge">1</span>
            </div>
            <div class="chat-item" data-name="Batman" data-message="I need those files!" data-avatar="icon5.png">
                <img src="icon5.png" alt="User" class="avatar">
                <div class="chat-info">
                    <div class="chat-name">Batman</div>
                    <div class="chat-message">I need those files!</div>
                </div>
                <span class="unread-badge">1</span>
            </div>
            <div class="chat-item" data-name="Batman" data-message="I need those files!" data-avatar="icon5.png">
                <img src="icon5.png" alt="User" class="avatar">
                <div class="chat-info">
                    <div class="chat-name">Batman</div>
                    <div class="chat-message">I need those files!</div>
                </div>
                <span class="unread-badge">1</span>
            </div>
            <div class="chat-item" data-name="Batman" data-message="I need those files!" data-avatar="icon5.png">
                <img src="icon5.png" alt="User" class="avatar">
                <div class="chat-info">
                    <div class="chat-name">Batman</div>
                    <div class="chat-message">I need those files!</div>
                </div>
                <span class="unread-badge">1</span>
            </div>
            <div class="chat-item" data-name="Batman" data-message="I need those files!" data-avatar="icon5.png">
                <img src="icon5.png" alt="User" class="avatar">
                <div class="chat-info">
                    <div class="chat-name">Batman</div>
                    <div class="chat-message">I need those files!</div>
                </div>
                <span class="unread-badge">1</span>
            </div>
            <div class="chat-item" data-name="Batman" data-message="I need those files!" data-avatar="icon5.png">
                <img src="icon5.png" alt="User" class="avatar">
                <div class="chat-info">
                    <div class="chat-name">Batman</div>
                    <div class="chat-message">I need those files!</div>
                </div>
                <span class="unread-badge">1</span>
            </div>
            <div class="chat-item" data-name="Batman" data-message="I need those files!" data-avatar="icon5.png">
                <img src="icon5.png" alt="User" class="avatar">
                <div class="chat-info">
                    <div class="chat-name">Batman</div>
                    <div class="chat-message">I need those files!</div>
                </div>
                <span class="unread-badge">1</span>
            </div>
            <div class="chat-item" data-name="Batman" data-message="I need those files!" data-avatar="icon5.png">
                <img src="icon5.png" alt="User" class="avatar">
                <div class="chat-info">
                    <div class="chat-name">Batman</div>
                    <div class="chat-message">I need those files!</div>
                </div>
                <span class="unread-badge">1</span>
            </div>

            <div class="bottom-icons">
                <span class="material-icons">chat</span>
                <span class="material-icons">motion_photos_on</span>
                <span class="material-icons">settings</span>
            </div>
            

        </div>

        <div class="chat-content">
            <div class="chat-messages"></div>
            <div class="chat-input">
                <input type="text" placeholder="Type a message..." id="messageInput"/>
                <button onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>

   
    <script>
    
        let messages = {};

        document.getElementById("searchInput").addEventListener("input", function() {
            let filter = this.value.toLowerCase();
            let chatItems = document.querySelectorAll(".chat-item");

            chatItems.forEach(item => {
                let name = item.querySelector(".chat-name").textContent.toLowerCase();
                item.style.display = name.includes(filter) ? "flex" : "none";
            });
        });

        const chatItems = document.querySelectorAll(".chat-item");
        const chatMessages = document.querySelector(".chat-messages");
        const chatInput = document.querySelector(".chat-input");
        let activeChatName = "";
        let activeAvatar = "";

        chatInput.style.display = "none";

        chatItems.forEach(item => {
            item.addEventListener("click", function() {
                chatItems.forEach(i => i.classList.remove("active"));
                this.classList.add("active");
        
                activeChatName = this.getAttribute("data-name");
                const lastMessage = this.getAttribute("data-message");
                activeAvatar = this.getAttribute("data-avatar");
        
                this.querySelector(".unread-badge")?.remove();
        
                chatInput.style.display = "flex";
        
                chatMessages.innerHTML = '';
                chatMessages.innerHTML += `<div class="person-a">
                    <div class="icon" style="background-image: url('${activeAvatar}');"></div>
                    <div class="message">${lastMessage}</div>
                </div>`;
        
                if (messages[activeChatName]) {
                    messages[activeChatName].forEach(message => {
                        chatMessages.innerHTML += `<div class="${message.sender === 'user' ? 'person-b' : 'person-a'}">
                            <div class="message">${message.text}</div>
                        </div>`;
                    });
                }
            });
        });
        
        document.getElementById("messageInput").addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                sendMessage();
            }
        });

        function sendMessage() {
            const input = document.getElementById("messageInput");
            if (input.value.trim() === "" || activeChatName === "") return;
        
            if (!messages[activeChatName]) {
                messages[activeChatName] = [];
            }
        
            messages[activeChatName].push({
                sender: 'user',
                text: input.value
            });
        
            chatMessages.innerHTML += `<div class="person-b"><div class="message">${input.value}</div></div>`;
            input.value = "";
        
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
    </script>

</body>
</html>
